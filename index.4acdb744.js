!function(){function t(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=Array(e);r<e;r++)i[r]=t[r];return i}function e(e,r){if(e){if("string"==typeof e)return t(e,r);var i=Object.prototype.toString.call(e).slice(8,-1);if("Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i)return Array.from(i);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,r)}}function r(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r,i,n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var a=[],o=!0,l=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(t){l=!0,i=t}finally{try{o||null==n.return||n.return()}finally{if(l)throw i}}return a}}(t,r)||e(t,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(r){return function(e){if(Array.isArray(e))return t(e)}(r)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(r)||e(r)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var n=new/*#__PURE__*/(function(){var t;function e(t){!function(t,e){if(!(t instanceof e))throw TypeError("Cannot call a class as a function")}(this,e),this.score=0,this.status="idle",t?this.field=t:this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]}return t=[{key:"moveLeft",value:function(){var t=[],e=!0,i=!1,n=void 0;try{for(var a,o=this.field[Symbol.iterator]();!(e=(a=o.next()).done);e=!0){var l=a.value;t.push(this._slideAndMergeRow(l))}}catch(t){i=!0,n=t}finally{try{e||null==o.return||o.return()}finally{if(i)throw n}}for(var f=!1,s=0;s<4;s++){for(var u=0;u<4;u++)if(t[s][u]!==this.field[s][u]){f=!0;break}if(f)break}if(f){this.field=t;for(var h=[],d=0;d<4;d++)for(var c=0;c<4;c++)0===this.field[d][c]&&h.push([d,c]);if(h.length>0){var v=r(h[Math.floor(Math.random()*h.length)],2),y=v[0],m=v[1];this.field[y][m]=.9>Math.random()?2:4}}}},{key:"moveRight",value:function(){var t=[],e=!0,n=!1,a=void 0;try{for(var o,l=this.field[Symbol.iterator]();!(e=(o=l.next()).done);e=!0){var f=o.value,s=i(f).reverse(),u=this._slideAndMergeRow(s);t.push(u.reverse())}}catch(t){n=!0,a=t}finally{try{e||null==l.return||l.return()}finally{if(n)throw a}}for(var h=!1,d=0;d<4;d++){for(var c=0;c<4;c++)if(t[d][c]!==this.field[d][c]){h=!0;break}if(h)break}if(h){this.field=t;for(var v=[],y=0;y<4;y++)for(var m=0;m<4;m++)0===this.field[y][m]&&v.push([y,m]);if(v.length>0){var g=r(v[Math.floor(Math.random()*v.length)],2),b=g[0],p=g[1];this.field[b][p]=.9>Math.random()?2:4}}}},{key:"moveUp",value:function(){for(var t=Array.from({length:4},function(){return[,,,,].fill(0)}),e=0;e<4;e++)for(var i=[this.field[0][e],this.field[1][e],this.field[2][e],this.field[3][e]],n=this._slideAndMergeRow(i),a=0;a<4;a++)t[a][e]=n[a];for(var o=!1,l=0;l<4;l++){for(var f=0;f<4;f++)if(t[l][f]!==this.field[l][f]){o=!0;break}if(o)break}if(o){this.field=t;for(var s=[],u=0;u<4;u++)for(var h=0;h<4;h++)0===this.field[u][h]&&s.push([u,h]);if(s.length>0){var d=r(s[Math.floor(Math.random()*s.length)],2),c=d[0],v=d[1];this.field[c][v]=.9>Math.random()?2:4}}}},{key:"moveDown",value:function(){for(var t=Array.from({length:4},function(){return[,,,,].fill(0)}),e=0;e<4;e++)for(var n=i([this.field[0][e],this.field[1][e],this.field[2][e],this.field[3][e]]).reverse(),a=this._slideAndMergeRow(n).reverse(),o=0;o<4;o++)t[o][e]=a[o];for(var l=!1,f=0;f<4;f++){for(var s=0;s<4;s++)if(t[f][s]!==this.field[f][s]){l=!0;break}if(l)break}if(l){this.field=t;for(var u=[],h=0;h<4;h++)for(var d=0;d<4;d++)0===this.field[h][d]&&u.push([h,d]);if(u.length>0){var c=r(u[Math.floor(Math.random()*u.length)],2),v=c[0],y=c[1];this.field[v][y]=.9>Math.random()?2:4}}}},{key:"getScore",value:function(){return this.score}},{key:"getState",value:function(){return this.field}},{key:"getStatus",value:function(){if("idle"===this.status)return"idle";for(var t=0;t<4;t++)for(var e=0;e<4;e++)if(2048===this.field[t][e])return"win";for(var r=0;r<4;r++)for(var i=0;i<4;i++)if(0===this.field[r][i])return"playing";for(var n=0;n<4;n++)for(var a=0;a<3;a++)if(this.field[n][a]===this.field[n][a+1]||this.field[a][n]===this.field[a+1][n])return"playing";return"lose"}},{key:"start",value:function(){this.score=0,this.status="playing",this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];for(var t=0;t<2;t++){for(var e=[],i=0;i<4;i++)for(var n=0;n<4;n++)0===this.field[i][n]&&e.push([i,n]);var a=r(e[Math.floor(Math.random()*e.length)],2),o=a[0],l=a[1];this.field[o][l]=.9>Math.random()?2:4}}},{key:"restart",value:function(){this.field=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],this.score=0,this.status="idle"}},{key:"_slideAndMergeRow",value:function(t){for(var e=t.filter(function(t){return 0!==t}),r=[],i=0;i<e.length;i++)e[i]===e[i+1]?(r.push(2*e[i]),this.score+=2*e[i],i++):r.push(e[i]);for(;r.length<4;)r.push(0);return r}}],function(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(e.prototype,t),e}()),a=document.querySelectorAll(".field-cell"),o=document.querySelector(".game-score"),l=document.querySelector(".button.start"),f=document.querySelector(".message-win"),s=document.querySelector(".message-lose"),u=document.querySelector(".message-start");function h(){var t=n.getState();a.forEach(function(e,r){var i=t[Math.floor(r/4)][r%4];e.textContent=0===i?"":i,e.className="field-cell",i&&e.classList.add("field-cell--".concat(i))}),o.textContent=n.getScore(),f.classList.toggle("hidden","win"!==n.getStatus()),s.classList.toggle("hidden","lose"!==n.getStatus()),u.classList.toggle("hidden","idle"!==n.getStatus())}document.addEventListener("keydown",function(t){if("playing"===n.getStatus()){switch(t.key){case"ArrowLeft":n.moveLeft();break;case"ArrowRight":n.moveRight();break;case"ArrowUp":n.moveUp();break;case"ArrowDown":n.moveDown()}h()}}),l.addEventListener("click",function(){"idle"===n.getStatus()?(n.start(),l.textContent="Restart",l.classList.remove("start"),l.classList.add("restart")):(n.restart(),l.textContent="Start",l.classList.remove("restart"),l.classList.add("start")),h()}),h()}();
//# sourceMappingURL=index.4acdb744.js.map
